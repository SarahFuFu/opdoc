---
title: 数据表设计
type: java-tenantsystem
order: 2
---

多租户数据隔离的方案有三种：1.独立数据库；2.共享数据库，独立Schema; 3.共享数据库，共享Schema,共享数据表。本系统中用的就是第三种模式。

数据表设计工具这里使用的是[PDMan](http://www.pdman.cn/#/)。

## 租赁系统通用表字段
在当前系统中的数据表通用字段如下：

| 字段名 | 逻辑名 | 类型 | 说明 |
| :---- | :---- | :---- | :---- |
| 主键 |  id | bigint|  |
| 状态(0正常 1停用) | status | tinyint |  |
| 最后更新人 |  updated_by | varchar(128) | 登录账号字段 |
| 最后更新时间 |  updated_on | datetime|  |
| 版本号 |  version |int | 乐观锁 |
| 备注 |  remark |varchar(256) |  |
| 租户id |  corp_id |bigint | [多租户字段]() |
| 是否删除 |  flag |tinyint | 0未删除1已删除 |


*  **不需要使用通用字段的表可不用，这里只是为了满足需要使用这些字段的表的需要。**  

* [多租户字段](): 该字段是SaaS系统中最关键的字段，用于不同租户的数据隔离。


## 表设计规约


1.  数据库名，数据表名，字段名采用全小写，各单词之间采用下划线分隔

2.  数据库表名以不同前缀来区分主要用途，例如：auth_ 代表权限相关表，sys_ 表示系统级别的表，pub_ 代表公共业务相关的表

3.  业务实体表需包含数据表通用字段

4.  主键字段统一使用bigint 类型，自增字段

5.  对于业务字段较多的表，可将表字段根据使用频率/业务进行拆分。扩展表后缀为_ext, 或其他表示业务功能的后缀

6.  对于日期时间字段统一使用datetime 类型, 日期字段统一使用date类型

7.  结合实际业务在定义数据库表时，适当考虑字段冗余

8.  每个字段须根据实际业务设置是否可为空

9.  用数字表示值时，根据实际情况选择tinyint/smallint等，而非用char/number等

10.  对于一些约定俗成的字段可采用简写。如：密码(pwd), 微信(wx)，车辆vin码(vin), 组织机构(org), 字典(dict)      




